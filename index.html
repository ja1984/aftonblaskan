<!doctype html>
<html class="no-js" lang="">

<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Aftonblaskan</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	<!-- Place favicon.ico in the root directory -->
	<link rel="stylesheet" href="css/main.css">
</head>

<body>
	<!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

	<!-- Add your site or application content here -->

<h1>Aftonblaskan</h1>
<p>Alla aftonbladets ickeartiklar enkelt samlade på ett ställe</p>

<ul data-bind="foreach: articles">
	<li>
	<a href="#" data-bind="attr:{'href':url}">
		<h2 data-bind="text: title"></h2>
	</a>
	</li>
</ul>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.1/knockout-min.js"></script>
	<script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.12.0.min.js"><\/script>')</script>
	<script>

		var ArticlesModel = function(){
			var priv = {};
			var pub = {};

			priv.viewModel = function(){
				var inner = {}
				inner.articles = ko.observableArray([]);

				priv.loadArticles().done(function(response){
					$.each(response, function(){
						inner.articles.push(new priv.Article(this, inner));
						console.log(this);
					});
				});

				return inner;
			}

			priv.Article = function(data, viewModel){
				var inner = data;
				return inner;
			}

			priv.loadArticles = function(){
			return	$.ajax({
				url: 'https://raw.githubusercontent.com/ja1984/aftonblaskan/master/articles.json',	
				dataType: 'json'
				});
			};

			pub.init = function(){
				return priv.viewModel();
			}

			return pub;
		};

		$(function(){
			ko.applyBindings(new ArticlesModel().init());			
		});
	</script>
</body>

</html>